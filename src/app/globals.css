@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  @font-face {
    font-family: 'Soopafresh';
    src: url('/soopafre.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
  }

  @font-face {
    font-family: 'Moms';
    src: url('/moms.otf') format('opentype');
    font-weight: normal;
    font-style: normal;
  }
  
  :root {
    --background: 32 45% 98%;
    --foreground: 210 22% 16%;

    --card: 32 60% 99%;
    --card-foreground: 210 22% 16%;
    --panel-warm: 28 68% 97%;
    --panel-neutral: 32 52% 99%;
    --panel-sage: 110 38% 95%;
    --panel-border: 27 34% 78%;
 
    --popover: 0 0% 100%;
    --popover-foreground: 210 22% 16%;
 
    --primary: 24 92% 58%;
    --primary-foreground: 32 100% 98%;
 
    --secondary: 30 32% 92%;
    --secondary-foreground: 218 32% 17%;
 
    --muted: 30 32% 92%;
    --muted-foreground: 215 18% 32%;
 
    --accent: 104 32% 42%;
    --accent-foreground: 210 40% 98%;
 
    --destructive: 2 78% 56%;
    --destructive-foreground: 210 40% 98%;

    --border: 28 28% 74%;
    --input: 28 28% 74%;
    --ring: 24 92% 58%;
 
    --radius: 0.75rem;

    --neu-shadow-light: 32 52% 88%;
    --neu-shadow-dark: 0 0% 100%;
    --neu-background: 32 52% 97%;

    --floating-letter: 32 38% 52%;
    --hero-border: 28 28% 74%;
    --hero-glow-soft: 30 92% 94%;
    --hero-glow-strong: 210 38% 88%;
    --hero-glow-ambient: 32 70% 78%;
    --button-contrast-light: 38 72% 98%;
    --button-contrast-dark: 32 28% 16%;

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }
 
  .dark {
    --background: 222 14% 8%;
    --foreground: 32 32% 92%;

    --card: 222 16% 12%;
    --card-foreground: 32 32% 92%;
    --panel-warm: 24 28% 16%;
    --panel-neutral: 224 20% 12%;
    --panel-sage: 152 18% 18%;
    --panel-border: 220 16% 24%;
 
    --popover: 222 16% 12%;
    --popover-foreground: 32 32% 92%;
 
    --primary: 24 88% 60%;
    --primary-foreground: 32 100% 98%;
 
    --secondary: 220 16% 18%;
    --secondary-foreground: 210 40% 98%;
    
    --muted: 220 16% 18%;
    --muted-foreground: 216 12% 72%;
    
    --accent: 110 32% 48%;
    --accent-foreground: 210 40% 98%;
 
    --destructive: 0 63% 41%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 220 16% 24%;
    --input: 220 16% 24%;
    --ring: 24 88% 60%;
    --radius: 0.75rem;

    --neu-shadow-light: 222 14% 5%;
    --neu-shadow-dark: 222 14% 18%;
    --neu-background: 222 14% 12%;

    --floating-letter: 28 68% 64%;
    --hero-border: 215 14% 26%;
    --hero-glow-soft: 32 72% 22%;
    --hero-glow-strong: 223 36% 10%;
    --hero-glow-ambient: 22 72% 38%;
    --button-contrast-light: 38 62% 96%;
    --button-contrast-dark: 32 28% 16%;
   
    --chart-1: 220 20% 55%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer components {
  .btn-neu {
    @apply flex items-center justify-center h-20 text-lg rounded-lg cursor-pointer transition-all duration-200 ease-in-out select-none;
    background-color: hsl(var(--neu-background));
    box-shadow: 8px 8px 16px hsl(var(--neu-shadow-light)), -8px -8px 16px hsl(var(--neu-shadow-dark));
  }

  .graffiti-layer {
    mix-blend-mode: normal;
    opacity: 0.95;
    filter: drop-shadow(0 30px 80px hsla(var(--hero-glow-soft) / 0.35));
  }

  .dark .graffiti-layer {
    mix-blend-mode: screen;
    opacity: 1;
  }

  .btn-neu-pressed {
    background-color: hsl(var(--neu-background));
    box-shadow: inset 8px 8px 16px hsl(var(--neu-shadow-light)), inset -8px -8px 16px hsl(var(--neu-shadow-dark));
  }

  .btn-multiplayer {
    @apply h-12 text-base rounded-lg cursor-pointer transition-all duration-300 ease-in-out flex items-center justify-center;
  }

  /* --- Light Mode --- */
  .light .btn-multiplayer-inactive {
    background-color: hsl(var(--neu-background));
    color: hsl(var(--muted-foreground));
    box-shadow: 5px 5px 10px hsl(var(--neu-shadow-light)), -5px -5px 10px hsl(var(--neu-shadow-dark));
  }

  .light .btn-multiplayer-active {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow: 0 0 20px 5px hsla(var(--primary), 0.5);
  }
  
  /* --- Dark Mode --- */
  .dark .btn-multiplayer-inactive {
    background-color: hsl(var(--secondary));
    color: hsl(var(--muted-foreground));
    box-shadow: 7px 7px 14px hsla(var(--primary), 0.2), -7px -7px 14px hsla(var(--primary), 0.05);
  }
  
  .dark .btn-multiplayer-active {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow: inset 7px 7px 14px hsla(var(--primary), 0.4), inset -7px -7px 14px hsla(var(--primary), 0.2);
  }

  .neu-shell {
    background: hsl(var(--panel-neutral));
    border: 1px solid hsla(28, 32%, 65%, 0.25);
    box-shadow: -18px -18px 38px rgba(255, 255, 255, 0.55), 26px 26px 54px rgba(203, 142, 97, 0.3);
  }

  .dark .neu-shell {
    background: hsl(var(--card));
    border-color: hsla(0, 0%, 100%, 0.08);
    box-shadow: -18px -18px 34px rgba(255, 255, 255, 0.04), 24px 24px 60px rgba(0, 0, 0, 0.5);
  }

  .neu-card {
    background: hsl(var(--panel-neutral));
    border: 1px solid hsla(28, 32%, 65%, 0.35);
    box-shadow: -12px -12px 28px rgba(255, 255, 255, 0.7), 18px 18px 35px rgba(215, 146, 101, 0.35);
  }

  .dark .neu-card {
    background: hsl(var(--card));
    border-color: hsla(0, 0%, 100%, 0.08);
    box-shadow: inset -4px -4px 18px rgba(255, 255, 255, 0.05), inset 6px 6px 24px rgba(0, 0, 0, 0.6);
  }

  .sunset-card {
    background: linear-gradient(140deg, rgba(255, 250, 244, 0.98) 0%, rgba(255, 229, 200, 0.98) 55%, rgba(255, 209, 158, 0.98) 100%);
  }

  .dark .sunset-card {
    background: hsl(var(--card));
  }

  .sunset-shell {
    background: linear-gradient(140deg, #fffaf4 0%, #ffe5c8 48%, #ffd29e 100%);
    box-shadow: 0 45px 120px rgba(244, 148, 60, 0.23);
  }

  .dark .sunset-shell {
    background: hsl(var(--card));
    box-shadow: 0 40px 140px rgba(0, 0, 0, 0.25);
  }

  .pale-orange-shell {
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255, 185, 135, 0.6);
    border-radius: inherit;
  background: linear-gradient(118deg, #fff4eb 0%, #ffe2c7 35%, rgba(255, 206, 164, 0.98) 70%, rgba(255, 176, 117, 0.98) 100%);
  box-shadow: 0 45px 120px rgba(15, 23, 42, 0.22);
    color: #2b1606;
  }

  .pale-orange-shell::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0.65;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Cfilter id='grainStrong'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.1' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23grainStrong)' opacity='0.7'/%3E%3C/svg%3E");
    background-size: 170px 170px;
    mix-blend-mode: soft-light;
  }

  .hero-shell-light {
    position: relative;
    border-radius: inherit;
    border: 1.5px solid rgba(255, 193, 145, 0.85);
    background: linear-gradient(122deg, rgba(255, 244, 235, 0.95) 0%, rgba(255, 223, 194, 0.98) 32%, rgba(255, 187, 125, 0.98) 70%, rgba(255, 147, 73, 0.95) 100%);
    box-shadow:
      0 60px 140px rgba(255, 149, 64, 0.32),
      0 28px 70px rgba(252, 181, 129, 0.45),
      inset 0 0 0 1px rgba(255, 255, 255, 0.35);
    color: #28150b;
  }

  .hero-shell-light::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.65), transparent 55%);
    mix-blend-mode: soft-light;
    opacity: 0.85;
  }

  .glass-panel-strong {
    border: 1.5px solid rgba(255, 255, 255, 0.85);
    box-shadow:
      0 45px 90px rgba(15, 23, 42, 0.18),
      inset 10px 10px 24px rgba(255, 255, 255, 0.9),
      inset -10px -10px 22px rgba(148, 163, 184, 0.22);
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
  }

  .glass-panel-soft {
    border: 1.2px solid rgba(255, 255, 255, 0.8);
    box-shadow:
      0 28px 70px rgba(15, 23, 42, 0.14),
      inset 6px 6px 16px rgba(255, 255, 255, 0.88),
      inset -6px -6px 14px rgba(148, 163, 184, 0.18);
    backdrop-filter: blur(16px);
    background: rgba(255, 255, 255, 0.92);
  }

  .sunset-card {
    background: linear-gradient(135deg, #fff5eb 0%, #ffe2c2 55%, #ffd1a3 100%);
    box-shadow: 0 22px 50px rgba(244, 148, 60, 0.15);
  }

  .dark .sunset-card {
    background: hsl(var(--card));
    box-shadow: inset 0 0 0 rgba(0, 0, 0, 0);
  }

  .outline-bright {
    border-width: 1.5px;
    border-color: hsla(28, 62%, 62%, 0.8) !important;
  }

  .dark .outline-bright {
    border-color: hsla(0, 0%, 100%, 0.14) !important;
  }

  .mode-card {
    position: relative;
  }

  .play-pill {
    position: relative;
    overflow: hidden;
    isolation: isolate;
  }

  .play-pill::before,
  .play-pill::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.25s ease;
  }

  .play-pill::before {
    background: radial-gradient(circle, rgba(255, 255, 255, 0.75) 0%, rgba(255, 255, 255, 0.25) 45%, rgba(255, 255, 255, 0.05) 75%, transparent 90%);
    filter: blur(3px);
    z-index: 0;
    animation: play-pill-softpulse 1.9s ease-in-out infinite;
  }

  .play-pill::after {
    inset: -4px;
    border-radius: inherit;
    background: conic-gradient(
      from 0deg,
      rgba(255, 255, 255, 0) 0deg,
      rgba(255, 255, 255, 0.95) 65deg,
      rgba(255, 255, 255, 0.55) 120deg,
      rgba(255, 255, 255, 0.12) 200deg,
      rgba(255, 255, 255, 0) 360deg
    );
    mask: radial-gradient(circle, transparent calc(100% - 3px), #000 calc(100% - 1px));
    filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.95)) drop-shadow(0 0 30px rgba(255, 196, 120, 0.65));
    animation: play-pill-highlight 1s linear infinite;
    z-index: 1;
  }

  .mode-card:hover .play-pill::before,
  .mode-card:focus-visible .play-pill::before,
  .mode-card:focus-within .play-pill::before,
  .mode-card:hover .play-pill::after,
  .mode-card:focus-visible .play-pill::after,
  .mode-card:focus-within .play-pill::after {
    opacity: 1;
  }
}

@layer utilities {
  .animate-tile-pop {
    animation: tile-pop 220ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .animate-tile-shake {
    animation: tile-shake 340ms ease-in-out;
  }

  .tile-animate-reveal {
    animation: tile-reveal 520ms var(--tile-delay, 0ms) cubic-bezier(0.65, 0, 0.35, 1) both;
    transform-origin: center center;
    transform-style: preserve-3d;
  }

  .tile-animate-bounce {
    animation: tile-reveal-success 760ms var(--tile-delay, 0ms) cubic-bezier(0.65, 0, 0.35, 1) both;
    transform-origin: center center;
    transform-style: preserve-3d;
  }

  .tile-animate-shake {
    animation: tile-reveal-present 700ms var(--tile-delay, 0ms) cubic-bezier(0.65, 0, 0.35, 1) both;
    transform-origin: center center;
    transform-style: preserve-3d;
  }

  .animate-key-pop {
    animation: key-pop 210ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .keyboard-feedback {
    --key-feedback-color: hsla(var(--primary) / 0.45);
    animation: key-feedback 960ms var(--key-feedback-delay, 0ms) ease;
    will-change: transform, box-shadow;
  }

  .keyboard-feedback-correct {
    --key-feedback-color: hsla(var(--accent) / 0.5);
  }

  .keyboard-feedback-present {
    --key-feedback-color: hsla(var(--primary) / 0.6);
  }
}

@keyframes float {
  0% {
    transform: translateY(0px) translateX(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-40px) translateX(20px) rotate(6deg);
  }
  100% {
    transform: translateY(0px) translateX(0px) rotate(0deg);
  }
}

@keyframes tile-pop {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.12);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes tile-shake {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-3px);
  }
  50% {
    transform: translateX(3px);
  }
  75% {
    transform: translateX(-2px);
  }
  100% {
    transform: translateX(0);
  }
}

@keyframes tile-reveal {
  0% {
    transform: perspective(720px) rotateX(0deg);
  }
  50% {
    transform: perspective(720px) rotateX(92deg);
  }
  60% {
    transform: perspective(720px) rotateX(92deg);
  }
  100% {
    transform: perspective(720px) rotateX(0deg);
  }
}

@keyframes tile-reveal-success {
  0% {
    transform: perspective(720px) rotateX(0deg);
  }
  45% {
    transform: perspective(720px) rotateX(92deg);
  }
  60% {
    transform: perspective(720px) rotateX(0deg);
  }
  75% {
    transform: translateY(-6px) scale(1.05);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

@keyframes tile-reveal-present {
  0% {
    transform: perspective(720px) rotateX(0deg);
  }
  45% {
    transform: perspective(720px) rotateX(92deg);
  }
  60% {
    transform: perspective(720px) rotateX(0deg);
  }
  75% {
    transform: translateX(-3px) rotate(-1deg);
  }
  85% {
    transform: translateX(2px) rotate(1deg);
  }
  100% {
    transform: translateX(0) rotate(0deg);
  }
}

@keyframes key-pop {
  0% {
    transform: scale(1);
  }
  60% {
    transform: scale(1.12);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes key-feedback {
  0% {
    box-shadow: 0 0 0 0 transparent;
    transform: translateY(0) scale(1);
  }
  35% {
    box-shadow: 0 18px 38px var(--key-feedback-color);
    transform: translateY(-4px) scale(1.05);
  }
  100% {
    box-shadow: 0 0 0 0 transparent;
    transform: translateY(0) scale(1);
  }
}

@keyframes play-pill-softpulse {
  0% {
    transform: scale(0.92);
    opacity: 0.4;
  }
  55% {
    transform: scale(1.05);
    opacity: 1;
  }
  100% {
    transform: scale(0.92);
    opacity: 0.4;
  }
}

@keyframes play-pill-highlight {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes confetti-fall {
  0% {
    opacity: 0;
    transform: translate3d(0, -40px, 0) rotate(0deg);
  }
  15% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translate3d(0, 360px, 0) rotate(320deg);
  }
}

@keyframes loss-shock {
  0% {
    opacity: 0.85;
    transform: scale(0.65);
  }
  55% {
    opacity: 0.35;
    transform: scale(1.15);
  }
  100% {
    opacity: 0;
    transform: scale(1.4);
  }
}

@keyframes word-glow {
  0%,
  100% {
    box-shadow: 0 18px 38px rgba(0, 0, 0, 0.25);
    transform: translateY(0) scale(1);
  }
  50% {
    box-shadow: 0 28px 60px rgba(0, 0, 0, 0.35);
    transform: translateY(-6px) scale(1.05);
  }
}
